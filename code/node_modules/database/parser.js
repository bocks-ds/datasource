const env = require('env_vars')
const { CsvParser, JsonParser } = require('database/parsers')
const LoggerInstance = require('winston_logger')


LOGGER = new LoggerInstance('parser')


if (['csv', 'tsv'].includes(env.dataType)) {
    data = new CsvParser()
} else {
    data = new JsonParser()
}

LOGGER.verbose(`Data parsed from ${env.dataType}: ${data.table_names.join(' ')}`)


exports.table_names = data.table_names
exports.table_structures = data.table_structures
exports.data = data.data
