env = require('env_vars')

function getModelName(name) {
    if (env.tableSingulars[name])
      return env.tableSingulars[name]
    if (env.associativeTables[name])
     return env.associativeTables[name].model_name
    return undefined
  }
  
  
  function getTableByModel(value) {
    output = Object.keys(env.tableSingulars).find(key => env.tableSingulars[key] === value);
    if(output) {
      env.logger.debug(3, `Found model by name '${value}' in table_singulars.js`)
    } else {
      output = Object.keys(env.associativeTables).find(key => env.associativeTables[key].model_name === value);
      if (output)
        env.logger.debug(3, `Found model by name '${value}' in associative_tables.js`)
      else
        throw new env.DatasourceError(`Model not found in associative_tables.js or table_singulars.js`)
    }
    return output
  }

module.exports = {
    getModelName: getModelName,
    getTableByModel: getTableByModel,
}